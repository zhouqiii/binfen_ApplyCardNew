(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["applystep3"],{"4d63":function(e,t,n){var a=n("83ab"),s=n("da84"),o=n("94ca"),i=n("7156"),r=n("9bf2").f,c=n("241c").f,l=n("44e7"),d=n("ad6d"),h=n("9f7f"),m=n("6eeb"),f=n("d039"),u=n("69f3").set,p=n("2626"),g=n("b622"),y=g("match"),v=s.RegExp,b=v.prototype,C=/a/g,k=/a/g,w=new v(C)!==C,D=h.UNSUPPORTED_Y,P=a&&o("RegExp",!w||D||f((function(){return k[y]=!1,v(C)!=C||v(k)==k||"/a/i"!=v(C,"i")})));if(P){var A=function(e,t){var n,a=this instanceof A,s=l(e),o=void 0===t;if(!a&&s&&e.constructor===A&&o)return e;w?s&&!o&&(e=e.source):e instanceof A&&(o&&(t=d.call(e)),e=e.source),D&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var r=i(w?new v(e,t):v(e,t),a?this:b,A);return D&&n&&u(r,{sticky:n}),r},T=function(e){e in A||r(A,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},x=c(v),S=0;while(x.length>S)T(x[S++]);b.constructor=A,A.prototype=b,m(s,"RegExp",A)}p("RegExp")},aa96:function(e,t,n){},c1b6:function(e,t,n){"use strict";n("aa96")},c5f3:function(e,t,n){"use strict";n.r(t);var a,s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav-bar-base",{ref:"nav",attrs:{title:"我要申请-第三步"}}),n("div",[n("div",{staticClass:"box_frame cartMark"},[n("div",{staticClass:"card"},[n("div",{staticClass:"imgPos"},[n("img",{attrs:{src:e.cardMsg.defaultPic}})]),n("div",{staticStyle:{margin:"auto 0% auto 3%"}},[n("p",{staticClass:"titleCard"},[e._v(e._s(e.cardMsg.cardName))]),n("p",{staticClass:"cardNumber"},[e._v(e._s(e.cardMsg.cardIntro))])])])]),n("van-form",{staticClass:"formBox"},[n("div",[n("div",[n("p",{staticClass:"titleCard"},[e._v("紧急联系人")])]),n("div",{staticClass:"ruleForm"},[n("div",{staticClass:"formItem"},[n("van-field",{attrs:{label:"*紧急联系人","error-message":e.errMsg.name,placeholder:"请输入姓名"},on:{blur:e.checkName},model:{value:e.formData.emergencyContact,callback:function(t){e.$set(e.formData,"emergencyContact",t)},expression:"formData.emergencyContact"}})],1),n("div",{staticClass:"formItem"},[n("van-field",{attrs:{"is-link":"",readonly:"",label:"*与你的关系"},on:{click:function(t){e.showRelation=!0}},model:{value:e.formData.relationship,callback:function(t){e.$set(e.formData,"relationship",t)},expression:"formData.relationship"}}),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showRelation,callback:function(t){e.showRelation=t},expression:"showRelation"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.optionsRelation},on:{cancel:function(t){e.showRelation=!1},confirm:e.onConfirmRelation}})],1)],1),n("div",{staticClass:"formItem"},[n("van-field",{attrs:{label:"*ta的电话",placeholder:"请输入电话","error-message":e.errMsg.mobilePhone},on:{blur:e.checkPhone},model:{value:e.formData.emergencyConPhone,callback:function(t){e.$set(e.formData,"emergencyConPhone",t)},expression:"formData.emergencyConPhone"}})],1)])]),n("div",[n("div",[n("p",{staticClass:"titleCard"},[e._v("服务功能选择")])]),n("div",{staticClass:"ruleForm"},[n("div",{staticClass:"formItem"},[n("van-field",{attrs:{"is-link":"",readonly:"",label:"*账单发送方式"},on:{click:function(t){e.showsendType=!0}},model:{value:e.formData.sendType,callback:function(t){e.$set(e.formData,"sendType",t)},expression:"formData.sendType"}}),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showsendType,callback:function(t){e.showsendType=t},expression:"showsendType"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.optionssendType},on:{cancel:function(t){e.showsendType=!1},confirm:e.onConfirmsendType}})],1)],1),n("div",{staticClass:"formItem"},[n("van-field",{attrs:{"is-link":"",readonly:"",label:"*卡函寄送地址"},on:{click:function(t){e.showsendAddress=!0}},model:{value:e.formData.sendAddress,callback:function(t){e.$set(e.formData,"sendAddress",t)},expression:"formData.sendAddress"}}),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showsendAddress,callback:function(t){e.showsendAddress=t},expression:"showsendAddress"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.optionsAdress},on:{cancel:function(t){e.showsendAddress=!1},confirm:e.onConfirmsendAddress}})],1)],1),n("div",{staticClass:"formItem"},[n("van-cell",{attrs:{center:"",title:"*是否需要刷卡密码？"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-switch",{attrs:{size:"15"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})]},proxy:!0}])})],1)]),n("div",{staticClass:"tips"},[n("p",[e._v("*温馨提示:")]),n("p",[e._v("如果您申请金卡的要求未能审核通过，我们将为您寄送同一品牌的普卡。")])])])]),n("div",{staticClass:"agreeCheck"},[n("button",{staticClass:"submitBtn",style:e.thisStyle,attrs:{disabled:e.btnAgree},on:{click:e.submitMsg}},[n("span",[e._v("提交审核")])])])],1)],1)},o=[],i=n("ade3"),r=(n("3cd0"),n("1a44"),n("acc2"),n("01f7"),n("7744")),c=(n("25bb"),n("e8fd"),n("d282")),l=n("ea8e"),d={size:[Number,String],value:null,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,activeValue:{type:null,default:!0},inactiveValue:{type:null,default:!1}},h={inject:{vanField:{default:null}},watch:{value:function(){var e=this.vanField;e&&(e.resetValidation(),e.validateWithTrigger("onChange"))}},created:function(){var e=this.vanField;e&&!e.children&&(e.children=this)}},m=n("543e"),f=Object(c["a"])("switch"),u=f[0],p=f[1],g=u({mixins:[h],props:d,computed:{checked:function(){return this.value===this.activeValue},style:function(){return{fontSize:Object(l["a"])(this.size),backgroundColor:this.checked?this.activeColor:this.inactiveColor}}},methods:{onClick:function(e){if(this.$emit("click",e),!this.disabled&&!this.loading){var t=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",t),this.$emit("change",t)}},genLoading:function(){var e=this.$createElement;if(this.loading){var t=this.checked?this.activeColor:this.inactiveColor;return e(m["a"],{class:p("loading"),attrs:{color:t}})}}},render:function(){var e=arguments[0],t=this.checked,n=this.loading,a=this.disabled;return e("div",{class:p({on:t,loading:n,disabled:a}),attrs:{role:"switch","aria-checked":String(t)},style:this.style,on:{click:this.onClick}},[e("div",{class:p("node")},[this.genLoading()])])}}),y=(n("5a5c"),n("772a")),v=(n("b0c0"),n("4d63"),n("ac1f"),n("25f0"),n("159b"),n("b64b"),n("d3b7"),n("a15b"),n("1276"),n("f42a")),b=n.n(v),C={name:"ApplyServiceInfo",components:(a={},Object(i["a"])(a,y["a"].name,y["a"]),Object(i["a"])(a,g.name,g),Object(i["a"])(a,r["a"].name,r["a"]),a),data:function(){return{title:"我要申请-第3步",titleCard:"中银数字信用卡白金卡",desCard:"副标题，精简文案，突出卖点",picture:b.a,formData:{emergencyContact:"",relationship:"",emergencyConPhone:"",sendType:"",sendAddress:""},flag:{emergencyContact:!1,relationship:!1,emergencyConPhone:!1,sendType:!1,sendAddress:!1},errMsg:{mobilePhone:"",name:""},cardMsg:"",checked:!0,btnAgree:!0,thisStyle:"",showRelation:!1,showsendType:!1,showsendAddress:!1,optionsRelation:["父女","母女","兄弟姐妹"],optionssendType:["E-mail","phone"],optionsAdress:["北京市西二旗","外星球"]}},methods:{checkPhone:function(){var e=/^[0-9]+.?[0-9]*/;this.formData.emergencyConPhone||(this.errMsg.mobilePhone="请填写电话！",this.flag.emergencyConPhone=!1),e.test(this.formData.emergencyConPhone)||(this.errMsg.mobilePhone="格式错误！",this.flag.emergencyConPhone=!1),this.formData.emergencyConPhone.length>11?(this.errMsg.mobilePhone="号码最多11位！",this.flag.emergencyConPhone=!1):this.formData.emergencyConPhone.length<7?(this.errMsg.mobilePhone="号码最少7位！",this.flag.emergencyConPhone=!1):(this.errMsg.mobilePhone="",this.flag.emergencyConPhone=!0)},checkName:function(){var e=new RegExp("[一-龥]+");return this.formData.emergencyContact?e.test(this.formData.emergencyContact)?(this.errMsg.name="",this.flag.emergencyContact=!0,!0):(this.errMsg.name="请填汉字！",this.flag.emergencyContact=!1,!1):(this.errMsg.name="请填写姓名！",this.flag.emergencyContact=!1,!1)},onConfirmRelation:function(e){this.formData.relationship=e,this.showRelation=!1,this.flag.relationship=!0},onConfirmsendType:function(e){this.formData.sendType=e,this.showsendType=!1,this.flag.sendType=!0},onConfirmsendAddress:function(e){this.formData.sendAddress=e,this.showsendAddress=!1,this.flag.sendAddress=!0},sendData:function(e){var t,n=this,a=encodeURI(Date.parse(new Date));this.requestAxios({url:"/api/cgi.do?txnId=2APO200013&dns=628&gtype=9&attest=-339418059&imei=124545",params:{ecoType:e.ecoType,companyName:e.companyName,companyYears:e.companyYears,comProAndCity:e.comProAndCity,companyDetails:e.companyDetails,companyNumber:e.companyNumber,incomeYear:e.incomeYear,contactUrgent:e.contactUrgent,relation:e.relation,phone:e.phone,sendType:e.sendType,sendAddress:e.sendAddress,passwordUse:e.passwordUse,idCard:e.idCard,eduGrade:e.eduGrade,marriage:e.marriage,homeProAndCity:e.homeProAndCity,homeDetails:e.homeDetails,business:e.business,busInfo:e.busInfo,busGrade:e.busGrade,userId:123456,cardId:parseInt(this.$route.query.cardId,10),chineseName:e.chineseName,chinesePinyin:e.chinesePinyin,applyTime:a},method:"post"}).then((function(e){"00"===e.code?(t=JSON.parse(e.data),n.$router.push({path:"/ApplyEnd",query:{data:JSON.stringify(t.result)}})):n.$router.push({path:"/ApplyEnd",query:{data:""}})})).catch((function(e){console.log(e)}))},submitMsg:function(){var e=this.formData,t={};Object.keys(e).forEach((function(n){var a=e[n];a=a.toString(),a=a.split(" ").join(""),t[n]=a}));var n=JSON.parse(sessionStorage.getItem("basicData")),a=JSON.parse(sessionStorage.getItem("otherData"));n&&a?(Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.keys(a).forEach((function(e){t[e]=a[e]})),this.checked?t.passwordUse="1":t.passwordUse="0",t.marriage?t.marriage="1":t.marriage="0",Object.keys(t).forEach((function(e){t[e]=encodeURI(t[e])})),this.sendData(t)):this.$toast("有其他信息未填！")}},mounted:function(){this.cardMsg=JSON.parse(this.$route.query.data)},watch:{flag:{handler:function(e){console.log(this.formData);var t=!0;Object.keys(e).forEach((function(n){!1===e[n]&&(t=!1)})),t?(this.thisStyle="background: rgb(165 29 29 / 93%);",this.btnAgree=!1):(this.thisStyle="background: #33333391",this.btnAgree=!0)},deep:!0}},beforeDestory:function(){sessionStorage.removeItem("basicData"),sessionStorage.removeItem("otherData")}},k=C,w=(n("c1b6"),n("2877")),D=Object(w["a"])(k,s,o,!1,null,null,null);t["default"]=D.exports},e8fd:function(e,t,n){},f42a:function(e,t,n){e.exports=n.p+"img/card3.bf248202.png"}}]);